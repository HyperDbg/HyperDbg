# Code generated by Visual Studio kit, DO NOT EDIT.
cmake_minimum_required(VERSION 3.28)
project(HyperDbg C CXX)
set(CMAKE_CXX_STANDARD 23)
enable_language(ASM_MASM)
set_property(GLOBAL PROPERTY USE_FOLDERS ON)
#list(APPEND CMAKE_MODULE_PATH "$ENV{path}")
list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_LIST_DIR}")
find_package(WDK REQUIRED)

add_subdirectory(hyperhv)
target_link_libraries(hyperhv zydisKernel)

add_subdirectory(dependencies/pdbex/Source)
add_subdirectory(symbol-parser)
target_link_libraries(symbol-parser pdbex)

add_subdirectory(script-engine)
target_link_libraries(script-engine symbol-parser)

add_subdirectory(hyperlog)

link_directories(libraries/kdserial/x64)
add_subdirectory(kdserial)
target_link_libraries(kdserial kdserialtransport kdhv kdtelemetry)


add_subdirectory(hyperkd)
target_link_libraries(hyperkd hyperlog hyperhv kdserial)

#todo bug hyperdbg/script-eval/code/*.c #include "pch.h" not open hyperdbg/libhyperdbg/pch.h
#     it opened hyperdbg/hyperkd/header/pch.h ,the bug sees the wrong path
#add_definitions(
#        -DHPRDBGCTRL_EXPORTS
#)
#link_directories(libraries/keystone/release-lib)
#link_directories(libraries/zydis/user)
#add_subdirectory(libhyperdbg)
#target_link_libraries(libhyperdbg Zycore Zydis keystone script-engine )

#add_subdirectory(hyperdbg-cli)
#target_link_libraries(hyperdbg-cli libhyperdbg )
 
#add_subdirectory(hyperdbg-test)
#target_link_libraries(hyperdbg-test libhyperdbg )

set(save_src_dir ${CMAKE_CURRENT_SOURCE_DIR}/examples)
execute_process( COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_CURRENT_SOURCE_DIR}/../examples ${save_src_dir})


add_subdirectory("examples/kernel/hyperdbg_driver")
target_link_libraries(hyperdbg_driver hyperlog hyperhv kdserial)

#add_subdirectory("examples/user/hyperdbg_app")
#target_link_libraries(hyperdbg_app libhyperdbg )

